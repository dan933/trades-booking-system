<section class="bg-secondaryColour mt-20 w-full min-w-fit table-auto p-5">
  <div [class]="screenWidth >= 1261 ? '' : 'hidden'" class="p-5 grid grid-cols-6 gap-4 w-full justify-self-center">
    <div class="bg-primaryColour shadow-md text-white w-full h-full p-3 col-span-3">
      <h2>Customer Name:</h2>
      <h2 class="truncate">
        {{ customer?.firstName }} {{ customer?.lastName }}
      </h2>
    </div>
    <div class="bg-primaryColour shadow-md text-white w-full h-full p-3 col-span-3">
      <h2 class="relative top-2">Email:</h2>
      <div class="flex flex-wrap gap-3 relative justify-between">
        <h2 class="relative top-3 truncate">{{ customer?.email }}</h2>
        <button matTooltip="Copy to clipboard" (click)="onEmailClick(customer?.email)" style="width: 170px"
          class="bg-blue-600 hover:bg-primaryColour text-white rounded-lg py-4 flex items-center justify-center gap-2 transition-colors duration-200 shadow-md">
          <mat-icon>email</mat-icon>
          <span>Email</span>
        </button>
      </div>
    </div>
    <div class="bg-primaryColour shadow-md text-white w-full h-full p-3 col-span-3">
      <h2 class="relative top-2">Location:</h2>
      <div class="flex flex-wrap gap-3 relative justify-between">
        <h2 class="relative top-3">{{ customer?.address }}</h2>
        <button style="width: 170px" (click)="openMaps(customer?.address)"
          class="bg-blue-600 hover:bg-primaryColour text-white rounded-lg py-4 flex items-center justify-center gap-2 transition-colors duration-200 shadow-md">
          <mat-icon>location_on</mat-icon>
          <span> Open in Maps </span>
        </button>
      </div>
    </div>
    @if(customer?.phoneNumber){
    <div class="bg-primaryColour shadow-md text-white w-full h-full p-3 flex justify-between flex-col col-span-3">
      <h2 class="relative top-2">Phone:</h2>
      <div class="flex flex-wrap gap-3 relative justify-between">
        <h2 class="relative top-3">{{ customer?.phoneNumber }}</h2>
        <button style="width: 170px" (click)="callPhone(customer?.phoneNumber)"
          class="bg-blue-600 hover:bg-primaryColour text-white rounded-lg py-4 flex items-center justify-center gap-2 transition-colors duration-200 shadow-md">
          <mat-icon>phone</mat-icon>
          <span> Call </span>
        </button>
      </div>
    </div>
    }

    <div class="bg-primaryColour shadow-md text-white w-full h-full col-span-6 p-5">
      <div id="chart"></div>
    </div>
  </div>

  <div [class]="screenWidth < 1261 ? '' : 'hidden'" class="p-5 flex flex-col gap-4 w-full justify-self-center">
    <div class="bg-primaryColour shadow-md text-white w-full h-full p-3 ">
      <h2>Customer Name:</h2>
      <h2 class="truncate">
        {{ customer?.firstName }} {{ customer?.lastName }}
      </h2>
    </div>
    <div class="bg-primaryColour shadow-md text-white w-full p-3 ">
      <h2 class="relative top-2">Email:</h2>
      <div class="flex flex-wrap gap-3 relative justify-between">
        <h2 class="relative top-3 truncate">{{ customer?.email }}</h2>
        <button matTooltip="Copy to clipboard" (click)="onEmailClick(customer?.email)" style="width: 170px"
          class="bg-blue-600 hover:bg-primaryColour text-white rounded-lg py-4 flex items-center justify-center gap-2 transition-colors duration-200 shadow-md">
          <mat-icon>email</mat-icon>
          <span>Email</span>
        </button>
      </div>
    </div>
    <div class="bg-primaryColour shadow-md text-white w-full p-3 ">
      <h2 class="relative top-2">Location:</h2>
      <div class="flex flex-wrap gap-3 relative justify-between">
        <h2 class="relative top-3">{{ customer?.address }}</h2>
        <button style="width: 170px" (click)="openMaps(customer?.address)"
          class="bg-blue-600 hover:bg-primaryColour text-white rounded-lg py-4 flex items-center justify-center gap-2 transition-colors duration-200 shadow-md">
          <mat-icon>location_on</mat-icon>
          <span> Open in Maps </span>
        </button>
      </div>
    </div>
    @if(customer?.phoneNumber){
    <div class="bg-primaryColour shadow-md text-white w-full p-3 flex justify-between flex-col">
      <h2 class="relative top-2">Phone:</h2>
      <div class="flex flex-wrap gap-3 relative justify-between">
        <h2 class="relative top-3">{{ customer?.phoneNumber }}</h2>
        <button style="width: 170px" (click)="callPhone(customer?.phoneNumber)"
          class="bg-blue-600 hover:bg-primaryColour text-white rounded-lg py-4 flex items-center justify-center gap-2 transition-colors duration-200 shadow-md">
          <mat-icon>phone</mat-icon>
          <span> Call </span>
        </button>
      </div>
    </div>
    }

    <div class="bg-primaryColour shadow-md text-white w-full p-5">
      <div id="chart-mobile"></div>
    </div>
  </div>

  <section class="bg-secondaryColour mt-20 w-full table-auto p-5 flex flex-col items-center">
    <div>
      <form class="mb-6 flex flex-wrap gap-4 items-center">
        <div class="flex flex-col">
          <label for="startDate" class="text-textColour text-sm font-medium mb-2">From</label>
          <input (change)="getBookings()" id="startDate" type="date" [(ngModel)]="startDate" name="startDate"
            class="px-3 py-2 bg-primaryColour text-textColour border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" />
        </div>
        <div class="flex flex-col">
          <label for="endDate" class="text-textColour text-sm font-medium mb-2">To</label>
          <input (change)="getBookings()" id="endDate" type="date" [(ngModel)]="endDate" name="endDate"
            class="px-3 py-2 bg-primaryColour text-textColour border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" />
        </div>
        <div class="flex gap-3 ml-4 mt-5">
          <button type="button" (click)="setWeekView()"
            class="px-3 py-2 bg-blue-600 text-textColour rounded-lg hover:bg-blue-700">
            Week
          </button>
          <button type="button" (click)="setMonthView()"
            class="px-3 py-2 bg-blue-600 text-textColour rounded-lg hover:bg-blue-700">
            Month
          </button>
          <button type="button" (click)="setYearView()"
            class="px-3 py-2 bg-blue-600 text-textColour rounded-lg hover:bg-blue-700">
            Year
          </button>
        </div>
      </form>
      <app-table [tableHeaders]="['Date', 'Start Time', 'End Time', 'Amount', 'Status', '']" [tableData]="tableData"
        [actionRow]="actionRowData" [action]="goToDetails" actionLabel="Booking Details"></app-table>
      @if(hasMore && !bookingLoading){
      <button (click)="getBookings()"
        class="mt-3 mx-auto bg-blue-600 text-textColour px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-primaryColour">
        Load More
      </button>

      }
    </div>
  </section>
</section>